<apex:page sidebar="false" showHeader="true"  Controller="Dialpad.UsersController" standardStylesheets="true" docType="html-5.0" tabStyle="Dialpad__tab">
<html lang="en">
    <head>
        <title>Manage Users</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- Bootstrap core CSS -->
       <apex:stylesheet value="{!URLFOR($Resource.Dialpad__Bootstrap,'bootstrap-3.2.0-dist/css/bootstrap.min.css')}"/>
        <style>
            .divblocks {
                height:220px;
                color: #048FC2;
            }
            .detailP{
                height: 120px;
                color: #999;
                padding-top: 10px;
            }
            .bs .lastItem .btn
                {
                <!--Issue refreshListButton was not showing on List view -->
                background:url("/img/alohaSkin/sync.png") no-repeat scroll 2px 2px rgba(0, 0, 0, 0);
                }
                a {
               text-decoration: none !important;
               }
             button:focus {outline:0 !important;}
             .bs h1, .bs .h1, .bs h2, .bs .h2, .bs h3, .bs .h3 {
              margin-top: 20px;
              margin-bottom: 10px;
            }
            .bs h1, .bs h2, .bs h3, .bs h4, .bs h5, .bs h6, .bs .h1, .bs .h2, .bs .h3, .bs .h4, .bs .h5, .bs .h6 {
              font-family: inherit;
              font-weight: 600;
              line-height: 1.1;
              color: inherit;
            }
            body .pbBody table.list tr.dataRow th, body .pbBody table.list tr.dataRow td {
  border-width: 0 0 1px 0;
  vertical-align: middle;
  padding: 3px;
}
       </style>
         
    </head>
    <body>
       
        <div style ="width:20%">  
        <c:BootstrapComponent xFactor="ManageUsersTab"/>       
        </div>
       
         <div class="bs">
            <div class="container-fluid" style="margin-top:17px;">
                <div class="row row-offcanvas row-offcanvas-right">
                    <div class="col-xs-12 col-sm-9">                                             
                        <div class="jumbotron" style="-webkit-border-radius:5px; padding:22px;">                       
                          <h2>Manage Users</h2> <p style="font-size:10px; color:black; float:right; valign:bottom; padding-top:30px;" > Select the users you want to be members of the call center</p>         
                                     
                       </div> 
                       
                       <div id="LeadListView" >
                      <apex:form >   
                      <div style="padding-bottom: 5px; font-size: 14px;">
                      <img src="/s.gif" alt="Home" class="pageTitleIcon" title="Home"/>
                         <apex:selectList value="{!filter}"  size="1" >
                            <apex:actionSupport event="onchange" rerender="pbId,cases_table"/>
                            <apex:selectOption itemValue="all"  itemLabel="All Users"/>
                            <apex:selectOption itemValue="deactive" itemLabel="Inactive Users"/>
                            <apex:selectOption itemValue="active" itemLabel="Active Users"/>
                          </apex:selectList>
                          </div>
                      <div>  
                       
                         <apex:pageBlock id="pbId">
                         <apex:pageMessages id="msg"></apex:pageMessages>
                           <apex:commandButton id="edit" onclick="UserCallCenterEnbale()" style="margin-bottom: 10px;" value="Add Users" reRender="cases_table,msg"/>
                           <apex:commandButton id="inactive" onclick="UserCallCenterDisable()" style="margin-bottom: 10px;" value="Remove Users" reRender="cases_table,msg"/>
                           
                            <apex:pageBlockTable value="{!UsersData}" var="c" id="cases_table" > 
                                                  
                             <apex:column width="25px">
                                <apex:facet name="header">
                                    <input type="checkbox" onclick="checkAll(this,'Inputs')"/>
                                </apex:facet>
                                 <input id="Inputs" style="margin-left: 5px;" value="{!c.Id}" title="" type="checkbox" class="checkbox" name="ids"/>
                            </apex:column>                               
                                <apex:column headerValue="Name" value="{!c.Name}" />
                                <apex:column headerValue="Email" value="{!c.Email}" />   
                                <apex:column headerValue="Phone" value="{!c.Phone}" />   
                                <apex:column headerValue="UserName" value="{!c.UserName}" />  
                                <apex:column headerValue="Profile" value="{!c.profile.Name}" />                               
                                <!--<apex:column value="{!c.CallCenterId}" />-->                      
                            </apex:pageBlockTable>
                             <apex:panelGrid columns="8"> 
                 
                <apex:selectList value="{!size}" multiselect="false" size="1" onchange="refreshPageSize();">
                    <apex:selectOptions value="{!paginationSizeOptions}"/>
                </apex:selectList>
                 
                <apex:commandButton status="fetchStatus" reRender="pbId" value="First" action="{!setCon.first}" disabled="{!!setCon.hasPrevious}" title="First Page"/> 
  
                <apex:commandButton status="fetchStatus" reRender="pbId" value="Previous" action="{!setCon.previous}" disabled="{!!setCon.hasPrevious}" title="Previous Page"/> 
  
                <apex:commandButton status="fetchStatus" reRender="pbId" value="Next" action="{!setCon.next}" disabled="{!!setCon.hasNext}" title="Next Page"/> 
  
                <apex:commandButton status="fetchStatus" reRender="pbId" value="Last" action="{!setCon.last}" disabled="{!!setCon.hasNext}" title="Last Page"/> 
  
                <apex:outputText >{!(setCon.pageNumber * size)+1-size}-{!IF((setCon)!=null && (setCon.pageNumber * size)>noOfRecords, noOfRecords,
                     (setCon.pageNumber * size))} of {!noOfRecords}
                </apex:outputText>
                       
                <apex:outputPanel >                      
                    <apex:actionStatus id="fetchStatus" >
                        <apex:facet name="start" >
                          <img src="/img/loading.gif" />                    
                        </apex:facet>
                    </apex:actionStatus>
                </apex:outputPanel> 
  
            </apex:panelGrid>             
                        </apex:pageBlock>  
                        <apex:actionfunction name="EnableCallCenter" action="{!CallCenterEnable}" reRender="cases_table,msg">
                               <apex:param name="param1" assignTo="{!Ids}" value=""/>
                        </apex:actionfunction>    
                        <apex:actionfunction name="DisableCallCenter" action="{!CallCenterDisable}" reRender="cases_table,msg">
                               <apex:param name="param1" assignTo="{!Ids}" value=""/>
                        </apex:actionfunction>  
                        <apex:actionFunction name="refreshPageSize" action="{!refreshPageSize}" status="fetchStatus" reRender="pbId"/>  
                  </div>
              </apex:form>
            <base target="_parent"/>                      
                        </div>
                    </div><!--/span-->
                </div><!--/row-->
            </div><!--/.container-->
        </div>        
         <script> 
         function checkAll(cb,cbid)
            {
                var inputElem = document.getElementsByTagName('input');                                 
                for(var i=0; i<inputElem.length; i++)
                {        
                     if(inputElem[i].id.indexOf(cbid)!=-1){                                        
                        inputElem[i].checked = cb.checked;
                    }
                }                
            }        
          $("form").on( "click", "input", function() {
            var record = document.getElementsByTagName('input');            
            var Ids = '';
            for(var i=0; record[i]; ++i){
              if(record[i].checked){
              if(record[i].value != 'on')
                  {
                      if(Ids=='')
                      {
                      Ids = record[i].value;
                      }
                      else
                      {
                      Ids = Ids+','+record[i].value;
                      }
                  }
              }  
             }
            });
            
          
          </script> 
          <script>
          function UserCallCenterEnbale()
           {
            var record = document.getElementsByTagName('input');                        
            var Ids = '';
            for(var i=0; record[i]; ++i){
              if(record[i].checked){
              if(record[i].value != 'on')
                  {
                      if(Ids=='')
                      {
                      Ids = record[i].value;
                      }
                      else
                      {
                      Ids = Ids+','+record[i].value;
                      }
                  }
              }  
             }if(Ids != '')
             {
              EnableCallCenter(Ids);
              }
              else
              {
                alert('Please select a record');
              }
               
           } 
           function UserCallCenterDisable()
           {
            var record = document.getElementsByTagName('input');                        
            var Ids = '';
            for(var i=0; record[i]; ++i){
              if(record[i].checked){
                  if(record[i].value != 'on')
                  {
                      if(Ids=='')
                      {
                      Ids = record[i].value;
                      }
                      else
                      {
                      Ids = Ids+','+record[i].value;
                      }
                  }
              }  
             }
             if(Ids != '')
             {
              DisableCallCenter(Ids);
              }
              else
              {
                alert('Please select a record');
              }
           } 
           
          </script>
        <!-- Bootstrap core JavaScript <div class="container-fluid"></div>
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <apex:includeScript value="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"/>
      <apex:includeScript value="{!URLFOR($Resource.Dialpad__Bootstrap,'bootstrap-3.2.0-dist/js/bootstrap.min.js')}"/>
    </body>
</html>

</apex:page>